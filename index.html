<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>RFID Attendance - Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="d-flex" id="wrapper">
      <nav id="sidebar" class="bg-dark text-white">
        <div class="sidebar-header p-3">
          <h3>Attendance</h3>
          <small id="adminName"></small>
          <button id="btnLogout" class="btn btn-sm btn-outline-light mt-2">
            Logout
          </button>
        </div>
        <ul class="list-unstyled ps-0">
          <li>
            <a href="#" class="nav-link active" data-view="dashboard"
              >Dashboard</a
            >
          </li>
          <li>
            <a href="#" class="nav-link" data-view="attendance">Attendance</a>
          </li>
          <li><a href="#" class="nav-link" data-view="reports">Reports</a></li>
          <li>
            <a href="#" class="nav-link" data-view="manage"
              >Manage (Students/Classes)</a
            >
          </li>
        </ul>
      </nav>

      <div id="page-content" class="flex-grow-1 p-4">
        <div id="view-dashboard" class="view">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>Dashboard</h2>
            <div class="d-flex gap-2">
              <select id="classSelect" class="form-select"></select>
              <a href="add_student.html" class="btn btn-success" id="gotoAddStudent">Add Student</a>
            </div>
          </div>
          <div class="row g-3">
            <div class="col-md-4">
              <div class="card p-3">
                <h5>Total Students</h5>
                <h3 id="totalStudents">--</h3>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card p-3">
                <h5>Present Today</h5>
                <h3 id="presentToday">--</h3>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card p-3">
                <h5>Attendance %</h5>
                <h3 id="attPercent">--</h3>
              </div>
            </div>
          </div>
          <hr />
          <canvas id="attendanceChart" height="120"></canvas>
        </div>

        <div id="view-attendance" class="view d-none">
          <div class="mb-3 d-flex gap-2">
            <input
              id="searchInput"
              class="form-control"
              placeholder="Search roll or name"
            />
            <input id="dateInput" type="date" class="form-control" />
            <button id="refreshBtn" class="btn btn-primary">Refresh</button>
          </div>
          <div class="table-responsive">
            <table class="table table-striped" id="attendanceTable">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Roll No</th>
                  <th>Name</th>
                  <th>Class</th>
                  <th>Date</th>
                  <th>Time</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <div id="view-reports" class="view d-none">
          <h3>Generate Report</h3>
          <div class="row g-2 align-items-end mb-3">
            <div class="col-md-3">
              <label>Class</label
              ><select id="reportClass" class="form-select"></select>
            </div>
            <div class="col-md-3">
              <label>Type</label
              ><select id="reportType" class="form-select">
                <option value="weekly">Weekly</option>
                <option value="monthly">Monthly</option>
                <option value="yearly">Yearly</option>
              </select>
            </div>
            <div class="col-md-3">
              <label>From</label
              ><input id="reportFrom" type="date" class="form-control" />
            </div>
            <div class="col-md-3">
              <label>To</label
              ><input id="reportTo" type="date" class="form-control" />
            </div>
          </div>
          <button id="genReport" class="btn btn-success mb-3">Generate</button>
          <div id="reportResult"></div>
        </div>

        <div id="view-manage" class="view d-none">
          <h3>Manage Students & Classes</h3>
          <div class="row">
            <div class="col-md-6">
              <h5>Add Class</h5>
              <input
                id="newClass"
                class="form-control mb-2"
                placeholder="Class name"
              />
              <button id="addClassBtn" class="btn btn-primary mb-3">
                Add Class
              </button>
              <h5>Classes</h5>
              <ul id="classList" class="list-group"></ul>
            </div>
            <div class="col-md-6">
              <h5>Add Student</h5>
              <input
                id="rollInput"
                class="form-control mb-2"
                placeholder="Roll No"
              />
              <input
                id="nameInput"
                class="form-control mb-2"
                placeholder="Name"
              />
              <select id="studentClass" class="form-select mb-2"></select>
              <button id="addStudentBtn" class="btn btn-primary">
                Add Student
              </button>
              <h5 class="mt-3">Students</h5>
              <div
                id="studentList"
                style="max-height: 300px; overflow: auto"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
  </body>
</html>
