<?php require '../api/db.php'; header('Content-Type: text/csv'); header('Content-Disposition: attachment; filename="attendance_report.csv"'); $res=$mysqli->query("SELECT a.roll_no,s.name,c.class_name,a.date,a.time,a.status FROM attendance a LEFT JOIN students s ON a.roll_no=s.roll_no LEFT JOIN classes c ON s.class_id=c.id ORDER BY a.date DESC"); $out = fopen('php://output','w'); fputcsv($out, ['RollNo','Name','Class','Date','Time','Status']); while($r=$res->fetch_assoc()) fputcsv($out, [$r['roll_no'],$r['name'],$r['class_name'],$r['date'],$r['time'],$r['status']]); fclose($out); exit; ?>